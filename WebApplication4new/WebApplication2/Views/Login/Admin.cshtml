@model  IEnumerable<WebApplication2.Models.table3>
@{
    WebGrid grid = new WebGrid(Model);

    Layout = null;

}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Admin</title>
</head>
<body>
    <div id="grid">
        @using (Html.BeginForm("Admin", "Login", FormMethod.Get))
        {


            @grid.GetHtml(
        htmlAttributes: new { @id = "WebGrid", @class = "Grid" },
        columns: grid.Columns(
                 grid.Column(header: "No", format: @<span class="label">@item.No</span>, style: "No"),
                                         grid.Column(header: "Username", format: @<span>
                                            <span class="label">@item.Username</span>
                                            <input class="text" type="text" value="@item.Username" style="display:none" />
                                        </span>, style: "Username"),
                                                                 grid.Column(header: "Password", format: @<span>
                                                                    <span class="label">@item.Password</span>
                                                                    <input class="text" type="text" value="@item.Password" style="display:none" />
                                                                </span>, style: "Password"),
                                                                                         grid.Column(header: "Email", format: @<span>
                                                                                            <span class="label">@item.Email</span>
                                                                                            <input class="text" type="text" value="@item.Email" style="display:none" />
                                                                                        </span>, style: "Email"),
                                                                                         grid.Column(format:@<span class="link">
                                                                                            <a class="Edit" href="javascript:;">Edit</a>
                                                                                            <a class="Update" href="javascript:;" style="display:none">Update</a>
                                                                                            <a class="Cancel" href="javascript:;" style="display:none">Cancel</a>
                                                                                            <a class="Delete" href="javascript:;">Delete</a>
                                                                                        </span>)))
            <input type="button" value="Insert" name="Creatednew" onclick='window.location = "@Url.Action("Insert", "Login")";' />



        }

    </div>
   
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>

    <script type="text/javascript">
        //Edit event handler.
        $("body").on("click", "#WebGrid TBODY .Edit", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find(".text").length > 0) {
                    $(this).find(".text").show();
                    $(this).find(".label").hide();
                }
            });
            row.find(".Update").show();
            row.find(".Cancel").show();
            $(this).hide();
        });

        //Update event handler.
        $("body").on("click", "#WebGrid TBODY .Update", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find(".text").length > 0) {
                    var span = $(this).find(".label");
                    var input = $(this).find(".text");
                    span.html(input.val());
                    span.show();
                    input.hide();
                }
            });
            row.find(".Edit").show();
            row.find(".Cancel").hide();
            $(this).hide();

            var tables = {};
            tables.Username = row.find(".CustomerId").find(".label").html();
            tables.Password = row.find(".Name").find(".label").html();
            tables.Email = row.find(".Country").find(".label").html();
            $.ajax({
                type: "POST",
                url: "/Login/Edit",
                data: '{tables:' + JSON.stringify(tables) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json"
            });
        });

        //Cancel event handler.
        $("body").on("click", "#WebGrid TBODY .Cancel", function () {
            var row = $(this).closest("tr");
            $("td", row).each(function () {
                if ($(this).find(".text").length > 0) {
                    var span = $(this).find(".label");
                    var input = $(this).find(".text");
                    input.val(span.html());
                    span.show();
                    input.hide();
                }
            });
            row.find(".Edit").show();
            row.find(".Update").hide();
            $(this).hide();
        });

        //delete event handler.
        $("body").on("click", "#WebGrid TBODY .Delete", function () {
            if (confirm("Do you want to delete this row?")) {
                var row = $(this).closest("tr");
              var No = row.find(".label").html();

                $.ajax({
                    type: "POST",
                    url: "/Login/Delete",
                    data: '{No: ' + No + '}',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        if ($("#WebGrid TBODY tr").length == 1) {
                            row.find(".label").html("");
                            row.find(".text").val("");
                            row.find(".link").hide();
                        } else {
                            row.remove();
                        }
                    }
                });
            }
        });




    </script>

</body>
</html>
